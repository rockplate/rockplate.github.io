(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+dQi":function(e,t,r){!function(e){"use strict";e.defineMode("javascript",(function(t,r){var n,o,i=t.indentUnit,s=r.statementIndent,a=r.jsonld,l=r.json||a,c=r.typescript,u=r.wordCharacters||/[\w$\xa1-\uffff]/,f=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),o=e("keyword d"),i=e("operator"),s={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:o,break:o,continue:o,new:e("new"),delete:n,void:n,throw:n,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:i,typeof:i,instanceof:i,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n,await:n}}(),d=/[+\-*&%=<>!?|~^@]/,p=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function h(e,t,r){return n=e,o=r,t}function m(e,t){var r,n=e.next();if('"'==n||"'"==n)return t.tokenize=(r=n,function(e,t){var n,o=!1;if(a&&"@"==e.peek()&&e.match(p))return t.tokenize=m,h("jsonld-keyword","meta");for(;null!=(n=e.next())&&(n!=r||o);)o=!o&&"\\"==n;return o||(t.tokenize=m),h("string","string")}),t.tokenize(e,t);if("."==n&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return h("number","number");if("."==n&&e.match(".."))return h("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return h(n);if("="==n&&e.eat(">"))return h("=>","operator");if("0"==n&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return h("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),h("number","number");if("/"==n)return e.eat("*")?(t.tokenize=g,g(e,t)):e.eat("/")?(e.skipToEnd(),h("comment","comment")):Ke(e,t,1)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),h("regexp","string-2")):(e.eat("="),h("operator","operator",e.current()));if("`"==n)return t.tokenize=y,y(e,t);if("#"==n)return e.skipToEnd(),h("error","error");if("<"==n&&e.match("!--")||"-"==n&&e.match("->"))return e.skipToEnd(),h("comment","comment");if(d.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),h("operator","operator",e.current());if(u.test(n)){e.eatWhile(u);var o=e.current();if("."!=t.lastType){if(f.propertyIsEnumerable(o)){var i=f[o];return h(i.type,i.style,o)}if("async"==o&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return h("async","keyword",o)}return h("variable","variable",o)}}function g(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=m;break}n="*"==r}return h("comment","comment")}function y(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=m;break}n=!n&&"\\"==r}return h("quasi","string-2",e.current())}var k="([{}])";function v(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){if(c){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,r));n&&(r=n.index)}for(var o=0,i=!1,s=r-1;s>=0;--s){var a=e.string.charAt(s),l=k.indexOf(a);if(l>=0&&l<3){if(!o){++s;break}if(0==--o){"("==a&&(i=!0);break}}else if(l>=3&&l<6)++o;else if(u.test(a))i=!0;else if(/["'\/`]/.test(a))for(;;--s){if(0==s)return;if(e.string.charAt(s-1)==a&&"\\"!=e.string.charAt(s-2)){s--;break}}else if(i&&!o){++s;break}}i&&!o&&(t.fatArrowAt=s)}}var b={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(e,t,r,n,o,i){this.indented=e,this.column=t,this.type=r,this.prev=o,this.info=i,null!=n&&(this.align=n)}function x(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return!0}var C={state:null,column:null,marked:null,cc:null};function O(){for(var e=arguments.length-1;e>=0;e--)C.cc.push(arguments[e])}function B(){return O.apply(null,arguments),!0}function P(e,t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}function M(e){var t=C.state;if(C.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var n=function e(t,r){if(r){if(r.block){var n=e(t,r.prev);return n?n==r.prev?r:new j(n,r.vars,!0):null}return P(t,r.vars)?r:new j(r.prev,new E(t,r.vars),!1)}return null}(e,t.context);if(null!=n)return void(t.context=n)}else if(!P(e,t.localVars))return void(t.localVars=new E(e,t.localVars));r.globalVars&&!P(e,t.globalVars)&&(t.globalVars=new E(e,t.globalVars))}function _(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function j(e,t,r){this.prev=e,this.vars=t,this.block=r}function E(e,t){this.name=e,this.next=t}var T=new E("this",new E("arguments",null));function D(){C.state.context=new j(C.state.context,C.state.localVars,!1),C.state.localVars=T}function A(){C.state.context=new j(C.state.context,C.state.localVars,!0),C.state.localVars=null}function L(){C.state.localVars=C.state.context.vars,C.state.context=C.state.context.prev}function S(e,t){var r=function(){var r=C.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var o=r.lexical;o&&")"==o.type&&o.align;o=o.prev)n=o.indented;r.lexical=new w(n,C.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function I(){var e=C.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function V(e){return function t(r){return r==e?B():";"==e||"}"==r||")"==r||"]"==r?O():B(t)}}function N(e,t){return"var"==e?B(S("vardef",t),ve,V(";"),I):"keyword a"==e?B(S("form"),H,N,I):"keyword b"==e?B(S("form"),N,I):"keyword d"==e?C.stream.match(/^\s*$/,!1)?B():B(S("stat"),z,V(";"),I):"debugger"==e?B(V(";")):"{"==e?B(S("}"),A,se,I,L):";"==e?B():"if"==e?("else"==C.state.lexical.info&&C.state.cc[C.state.cc.length-1]==I&&C.state.cc.pop()(),B(S("form"),H,N,I,Be)):"function"==e?B(je):"for"==e?B(S("form"),Pe,N,I):"class"==e||c&&"interface"==t?(C.marked="keyword",B(S("form","class"==e?e:t),Le,I)):"variable"==e?c&&"declare"==t?(C.marked="keyword",B(N)):c&&("module"==t||"enum"==t||"type"==t)&&C.stream.match(/^\s*\w/,!1)?(C.marked="keyword","enum"==t?B(qe):"type"==t?B(Te,V("operator"),fe,V(";")):B(S("form"),be,V("{"),S("}"),se,I,I)):c&&"namespace"==t?(C.marked="keyword",B(S("form"),F,N,I)):c&&"abstract"==t?(C.marked="keyword",B(N)):B(S("stat"),Y):"switch"==e?B(S("form"),H,V("{"),S("}","switch"),A,se,I,I,L):"case"==e?B(F,V(":")):"default"==e?B(V(":")):"catch"==e?B(S("form"),D,R,N,I,L):"export"==e?B(S("stat"),Ne,I):"import"==e?B(S("stat"),Fe,I):"async"==e?B(N):"@"==t?B(F,N):O(S("stat"),F,V(";"),I)}function R(e){if("("==e)return B(De,V(")"))}function F(e,t){return G(e,t,!1)}function U(e,t){return G(e,t,!0)}function H(e){return"("!=e?O():B(S(")"),z,V(")"),I)}function G(e,t,r){if(C.state.fatArrowAt==C.stream.start){var n=r?Q:$;if("("==e)return B(D,S(")"),oe(De,")"),I,V("=>"),n,L);if("variable"==e)return O(D,be,V("=>"),n,L)}var o=r?q:W;return b.hasOwnProperty(e)?B(o):"function"==e?B(je,o):"class"==e||c&&"interface"==t?(C.marked="keyword",B(S("form"),Ae,I)):"keyword c"==e||"async"==e?B(r?U:F):"("==e?B(S(")"),z,V(")"),I,o):"operator"==e||"spread"==e?B(r?U:F):"["==e?B(S("]"),We,I,o):"{"==e?ie(te,"}",null,o):"quasi"==e?O(J,o):"new"==e?B(function(e){return function(t){return"."==t?B(e?X:Z):"variable"==t&&c?B(ge,e?q:W):O(e?U:F)}}(r)):"import"==e?B(F):B()}function z(e){return e.match(/[;\}\)\],]/)?O():O(F)}function W(e,t){return","==e?B(z):q(e,t,!1)}function q(e,t,r){var n=0==r?W:q,o=0==r?F:U;return"=>"==e?B(D,r?Q:$,L):"operator"==e?/\+\+|--/.test(t)||c&&"!"==t?B(n):c&&"<"==t&&C.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?B(S(">"),oe(fe,">"),I,n):"?"==t?B(F,V(":"),o):B(o):"quasi"==e?O(J,n):";"!=e?"("==e?ie(U,")","call",n):"."==e?B(ee,n):"["==e?B(S("]"),z,V("]"),I,n):c&&"as"==t?(C.marked="keyword",B(fe,n)):"regexp"==e?(C.state.lastType=C.marked="operator",C.stream.backUp(C.stream.pos-C.stream.start-1),B(o)):void 0:void 0}function J(e,t){return"quasi"!=e?O():"${"!=t.slice(t.length-2)?B(J):B(F,K)}function K(e){if("}"==e)return C.marked="string-2",C.state.tokenize=y,B(J)}function $(e){return v(C.stream,C.state),O("{"==e?N:F)}function Q(e){return v(C.stream,C.state),O("{"==e?N:U)}function Z(e,t){if("target"==t)return C.marked="keyword",B(W)}function X(e,t){if("target"==t)return C.marked="keyword",B(q)}function Y(e){return":"==e?B(I,N):O(W,V(";"),I)}function ee(e){if("variable"==e)return C.marked="property",B()}function te(e,t){return"async"==e?(C.marked="property",B(te)):"variable"==e||"keyword"==C.style?(C.marked="property","get"==t||"set"==t?B(re):(c&&C.state.fatArrowAt==C.stream.start&&(r=C.stream.match(/^\s*:\s*/,!1))&&(C.state.fatArrowAt=C.stream.pos+r[0].length),B(ne))):"number"==e||"string"==e?(C.marked=a?"property":C.style+" property",B(ne)):"jsonld-keyword"==e?B(ne):c&&_(t)?(C.marked="keyword",B(te)):"["==e?B(F,ae,V("]"),ne):"spread"==e?B(U,ne):"*"==t?(C.marked="keyword",B(te)):":"==e?O(ne):void 0;var r}function re(e){return"variable"!=e?O(ne):(C.marked="property",B(je))}function ne(e){return":"==e?B(U):"("==e?O(je):void 0}function oe(e,t,r){function n(o,i){if(r?r.indexOf(o)>-1:","==o){var s=C.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),B((function(r,n){return r==t||n==t?O():O(e)}),n)}return o==t||i==t?B():r&&r.indexOf(";")>-1?O(e):B(V(t))}return function(r,o){return r==t||o==t?B():O(e,n)}}function ie(e,t,r){for(var n=3;n<arguments.length;n++)C.cc.push(arguments[n]);return B(S(t,r),oe(e,t),I)}function se(e){return"}"==e?B():O(N,se)}function ae(e,t){if(c){if(":"==e)return B(fe);if("?"==t)return B(ae)}}function le(e,t){if(c&&(":"==e||"in"==t))return B(fe)}function ce(e){if(c&&":"==e)return C.stream.match(/^\s*\w+\s+is\b/,!1)?B(F,ue,fe):B(fe)}function ue(e,t){if("is"==t)return C.marked="keyword",B()}function fe(e,t){return"keyof"==t||"typeof"==t||"infer"==t?(C.marked="keyword",B("typeof"==t?U:fe)):"variable"==e||"void"==t?(C.marked="type",B(me)):"|"==t||"&"==t?B(fe):"string"==e||"number"==e||"atom"==e?B(me):"["==e?B(S("]"),oe(fe,"]",","),I,me):"{"==e?B(S("}"),oe(pe,"}",",;"),I,me):"("==e?B(oe(he,")"),de,me):"<"==e?B(oe(fe,">"),fe):void 0}function de(e){if("=>"==e)return B(fe)}function pe(e,t){return"variable"==e||"keyword"==C.style?(C.marked="property",B(pe)):"?"==t||"number"==e||"string"==e?B(pe):":"==e?B(fe):"["==e?B(V("variable"),le,V("]"),pe):"("==e?O(Ee,pe):void 0}function he(e,t){return"variable"==e&&C.stream.match(/^\s*[?:]/,!1)||"?"==t?B(he):":"==e?B(fe):"spread"==e?B(he):O(fe)}function me(e,t){return"<"==t?B(S(">"),oe(fe,">"),I,me):"|"==t||"."==e||"&"==t?B(fe):"["==e?B(fe,V("]"),me):"extends"==t||"implements"==t?(C.marked="keyword",B(fe)):"?"==t?B(fe,V(":"),fe):void 0}function ge(e,t){if("<"==t)return B(S(">"),oe(fe,">"),I,me)}function ye(){return O(fe,ke)}function ke(e,t){if("="==t)return B(fe)}function ve(e,t){return"enum"==t?(C.marked="keyword",B(qe)):O(be,ae,Ce,Oe)}function be(e,t){return c&&_(t)?(C.marked="keyword",B(be)):"variable"==e?(M(t),B()):"spread"==e?B(be):"["==e?ie(xe,"]"):"{"==e?ie(we,"}"):void 0}function we(e,t){return"variable"!=e||C.stream.match(/^\s*:/,!1)?("variable"==e&&(C.marked="property"),"spread"==e?B(be):"}"==e?O():"["==e?B(F,V("]"),V(":"),we):B(V(":"),be,Ce)):(M(t),B(Ce))}function xe(){return O(be,Ce)}function Ce(e,t){if("="==t)return B(U)}function Oe(e){if(","==e)return B(ve)}function Be(e,t){if("keyword b"==e&&"else"==t)return B(S("form","else"),N,I)}function Pe(e,t){return"await"==t?B(Pe):"("==e?B(S(")"),Me,I):void 0}function Me(e){return"var"==e?B(ve,_e):"variable"==e?B(_e):O(_e)}function _e(e,t){return")"==e?B():";"==e?B(_e):"in"==t||"of"==t?(C.marked="keyword",B(F,_e)):O(F,_e)}function je(e,t){return"*"==t?(C.marked="keyword",B(je)):"variable"==e?(M(t),B(je)):"("==e?B(D,S(")"),oe(De,")"),I,ce,N,L):c&&"<"==t?B(S(">"),oe(ye,">"),I,je):void 0}function Ee(e,t){return"*"==t?(C.marked="keyword",B(Ee)):"variable"==e?(M(t),B(Ee)):"("==e?B(D,S(")"),oe(De,")"),I,ce,L):c&&"<"==t?B(S(">"),oe(ye,">"),I,Ee):void 0}function Te(e,t){return"keyword"==e||"variable"==e?(C.marked="type",B(Te)):"<"==t?B(S(">"),oe(ye,">"),I):void 0}function De(e,t){return"@"==t&&B(F,De),"spread"==e?B(De):c&&_(t)?(C.marked="keyword",B(De)):c&&"this"==e?B(ae,Ce):O(be,ae,Ce)}function Ae(e,t){return"variable"==e?Le(e,t):Se(e,t)}function Le(e,t){if("variable"==e)return M(t),B(Se)}function Se(e,t){return"<"==t?B(S(">"),oe(ye,">"),I,Se):"extends"==t||"implements"==t||c&&","==e?("implements"==t&&(C.marked="keyword"),B(c?fe:F,Se)):"{"==e?B(S("}"),Ie,I):void 0}function Ie(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||c&&_(t))&&C.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(C.marked="keyword",B(Ie)):"variable"==e||"keyword"==C.style?(C.marked="property",B(c?Ve:je,Ie)):"number"==e||"string"==e?B(c?Ve:je,Ie):"["==e?B(F,ae,V("]"),c?Ve:je,Ie):"*"==t?(C.marked="keyword",B(Ie)):c&&"("==e?O(Ee,Ie):";"==e||","==e?B(Ie):"}"==e?B():"@"==t?B(F,Ie):void 0}function Ve(e,t){if("?"==t)return B(Ve);if(":"==e)return B(fe,Ce);if("="==t)return B(U);var r=C.state.lexical.prev;return O(r&&"interface"==r.info?Ee:je)}function Ne(e,t){return"*"==t?(C.marked="keyword",B(ze,V(";"))):"default"==t?(C.marked="keyword",B(F,V(";"))):"{"==e?B(oe(Re,"}"),ze,V(";")):O(N)}function Re(e,t){return"as"==t?(C.marked="keyword",B(V("variable"))):"variable"==e?O(U,Re):void 0}function Fe(e){return"string"==e?B():"("==e?O(F):O(Ue,He,ze)}function Ue(e,t){return"{"==e?ie(Ue,"}"):("variable"==e&&M(t),"*"==t&&(C.marked="keyword"),B(Ge))}function He(e){if(","==e)return B(Ue,He)}function Ge(e,t){if("as"==t)return C.marked="keyword",B(Ue)}function ze(e,t){if("from"==t)return C.marked="keyword",B(F)}function We(e){return"]"==e?B():O(oe(U,"]"))}function qe(){return O(S("form"),be,V("{"),S("}"),oe(Je,"}"),I,I)}function Je(){return O(be,Ce)}function Ke(e,t,r){return t.tokenize==m&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}return L.lex=!0,I.lex=!0,{startState:function(e){var t={tokenize:m,lastType:"sof",cc:[],lexical:new w((e||0)-i,0,"block",!1),localVars:r.localVars,context:r.localVars&&new j(null,null,!1),indented:e||0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),v(e,t)),t.tokenize!=g&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=o&&"--"!=o?n:"incdec",function(e,t,r,n,o){var i=e.cc;for(C.state=e,C.stream=o,C.marked=null,C.cc=i,C.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():l?F:N)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return C.marked?C.marked:"variable"==r&&x(e,n)?"variable-2":t}}(t,r,n,o,e))},indent:function(t,n){if(t.tokenize==g)return e.Pass;if(t.tokenize!=m)return 0;var o,a=n&&n.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(n))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==I)l=l.prev;else if(u!=Be)break}for(;("stat"==l.type||"form"==l.type)&&("}"==a||(o=t.cc[t.cc.length-1])&&(o==W||o==q)&&!/^[,\.=+\-*:?[\(]/.test(n));)l=l.prev;s&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var f=l.type,p=a==f;return"vardef"==f?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==f&&"{"==a?l.indented:"form"==f?l.indented+i:"stat"==f?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||d.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,n)?s||i:0):"switch"!=l.info||p||0==r.doubleIndentSwitch?l.align?l.column+(p?0:1):l.indented+(p?0:i):l.indented+(/^(?:case|default)\b/.test(n)?i:2*i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:a,jsonMode:l,expressionAllowed:Ke,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=F&&t!=U||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(r("VrN/"))},"0t4y":function(e,t,r){!function(e){"use strict";e.registerHelper("lint","json",(function(t){var r=[];if(!window.jsonlint)return window.console&&window.console.error("Error: window.jsonlint not defined, CodeMirror JSON linting cannot run."),r;var n=window.jsonlint.parser||window.jsonlint;n.parseError=function(t,n){var o=n.loc;r.push({from:e.Pos(o.first_line-1,o.first_column),to:e.Pos(o.last_line-1,o.last_column),message:t})};try{n.parse(t)}catch(o){}return r}))}(r("VrN/"))},"2qu3":function(e,t,r){"use strict";var n=r("lwsE"),o=r("W8MJ");function i(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=a(r("q1tI")),c=r("8L3h"),u=r("jwwS"),f=[],d=[],p=!1;function h(e){var t=e(),r={loading:!0,loaded:null,error:null};return r.promise=t.then((function(e){return r.loading=!1,r.loaded=e,e})).catch((function(e){throw r.loading=!1,r.error=e,e})),r}function m(e){var t={loading:!1,loaded:{},error:null},r=[];try{Object.keys(e).forEach((function(n){var o=h(e[n]);o.loading?t.loading=!0:(t.loaded[n]=o.loaded,t.error=o.error),r.push(o.promise),o.promise.then((function(e){t.loaded[n]=e})).catch((function(e){t.error=e}))}))}catch(n){t.error=n}return t.promise=Promise.all(r).then((function(e){return t.loading=!1,e})).catch((function(e){throw t.loading=!1,e})),t}function g(e,t){return l.default.createElement((r=e)&&r.__esModule?r.default:r,t);var r}function y(e,t){var r=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:g,webpack:null,modules:null},t),n=null;function o(){if(!n){var t=new k(e,r);n={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return n.promise()}if(!p&&"function"===typeof r.webpack){var s=r.webpack();d.push((function(e){var t,r=i(s);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(-1!==e.indexOf(n))return o()}}catch(a){r.e(a)}finally{r.f()}}))}var a=function(e,t){o();var i=l.default.useContext(u.LoadableContext),s=c.useSubscription(n);return l.default.useImperativeHandle(t,(function(){return{retry:n.retry}}),[]),i&&Array.isArray(r.modules)&&r.modules.forEach((function(e){i(e)})),l.default.useMemo((function(){return s.loading||s.error?l.default.createElement(r.loading,{isLoading:s.loading,pastDelay:s.pastDelay,timedOut:s.timedOut,error:s.error,retry:n.retry}):s.loaded?r.render(s.loaded,e):null}),[e,s])};return a.preload=function(){return o()},a.displayName="LoadableComponent",l.default.forwardRef(a)}var k=function(){function e(t,r){n(this,e),this._loadFn=t,this._opts=r,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return o(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,r=this._opts;t.loading&&("number"===typeof r.delay&&(0===r.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),r.delay)),"number"===typeof r.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),r.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(t){e._update({}),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=Object.assign(Object.assign(Object.assign({},this._state),{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading}),e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function v(e){return y(h,e)}function b(e,t){for(var r=[];e.length;){var n=e.pop();r.push(n(t))}return Promise.all(r).then((function(){if(e.length)return b(e,t)}))}v.Map=function(e){if("function"!==typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return y(m,e)},v.preloadAll=function(){return new Promise((function(e,t){b(f).then(e,t)}))},v.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var r=function(){return p=!0,t()};b(d,e).then(r,r)}))},window.__NEXT_PRELOADREADY=v.preloadReady,t.default=v},"65kQ":function(e,t,r){"use strict";r.r(t),t.default=function(){var e=r("VrN/");r("a2PE"),r("SJVZ"),r("y8iW"),r("rt3J"),r("iCJ0"),r("0t4y"),r("jXCp"),r("+dQi"),r("nrkQ"),r("CePI").register(e)}},B5nJ:function(e,t,r){"use strict";r.r(t),r.d(t,"LandingDemo",(function(){return a})),r.d(t,"RockPlateIntro",(function(){return l})),r.d(t,"CodeTabs",(function(){return c})),r.d(t,"HighlightDynamic",(function(){return u})),r.d(t,"Highlight",(function(){return f}));var n=r("q1tI"),o=r.n(n),i=r("lZL1"),s=o.a.createElement,a=Object(i.getComponent)("LandingDemo"),l=Object(i.getComponent)("rockplate-intro-block"),c=Object(i.getComponent)("CodeTabs"),u=Object(i.getComponent)("Highlight"),f=function(e){return s("div",null,s("div",{className:"highlight-component-server "+e.className+" language-"+e.language,style:{display:"none"}},e.children),s("div",{className:"highlight-component-browser"},s(u,e)))}},CePI:function(e,t,r){var n;"undefined"!=typeof self&&self,e.exports=(n=r("z06z"),function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=n},function(e,t,r){"use strict";r.r(t),r.d(t,"setRockplate",(function(){return i})),r.d(t,"getRockplate",(function(){return s})),r.d(t,"register",(function(){return a}));var n=new(function(){function e(){this.cmInstances=[],this.rockplates=[]}return e.prototype.setRockplate=function(e,t,r,n,o){var i={cm:e,schema:t,params:r,strict:n},s=this.cmInstances.indexOf(e),a=!0;-1!==s?(this.rockplates[s]=i,a=!1):(this.cmInstances.push(e),this.rockplates.push(i)),(a||o)&&this.updateRockplate(i)},e.prototype.getRockplate=function(e){var t=this.cmInstances.indexOf(e);if(-1!==t)return this.rockplates[t]},e.prototype.updateRockplate=function(e){var t=e.cm.getValue(),r=e.cm.getDoc(),n=r.lastLine(),o=r.getLine(r.lastLine()).length;r.replaceRange(t||"",{line:0,ch:0},{line:n,ch:o}),e.cm.setValue(t)},e}()),o=r(0),i=function(e,t,r,o,i){return n.setRockplate(e,t,r,o,i)},s=function(e){return n.getRockplate(e)},a=function(e){(function(e){e.defineMode("rockplate:inner",(function(){var e=/^(\d[+\-\*\/])?\d+(\.\d+)?/,t=new RegExp("(("+["end if","end repeat","if ","repeat ","else"].join(")|(")+"))\\b"),r=new RegExp("(("+[" are not "," are "," is not "," is "].join(")|(")+"))\\b");return{startState:function(){return{}},token:function(n,o){return function(n,o){if(n.peek(),o.incomment)return n.skipTo("--]")?(n.eatWhile("-"),n.eat("]"),o.incomment=!1):n.skipToEnd(),"comment";if(o.intag){if(o.operator){if(o.operator=!1,n.match(r))return"atom";if(n.match(e))return"number"}if(o.sign){if(o.sign=!1,n.match(r))return"atom";if(n.match(e))return"number"}return o.instring?(n.next(),"string"):n.match("]")?(n.eatWhile("]"),o.intag=!1,"tag"):n.match(r)?"atom":n.match(t)?"keyword":(n.sol()&&n.next(),n.next(),"variable-2")}if(n.eat("["))return n.match("--")?(n.eatWhile("-"),o.incomment=!0,"comment"):(o.intag=!0,"tag");n.next()}(n,o)}}})),e.defineMode("rockplate",(function(t,r){return e.getMode(t,"rockplate:inner")})),e.defineMIME("text/x-rockplate","rockplate")})(e),function(e){e.registerHelper("lint","rockplate",(function(t,r,i){for(var s=[],a=n.getRockplate(i),l=0,c=new o.Linter(t,a&&a.schema,a&&a.strict).lint(a?a.params:{}).lints;l<c.length;l++){var u=c[l];s.push({severity:u.severity,from:e.Pos(u.position.begin.line-1,u.position.begin.column),to:e.Pos(u.position.end.line-1,u.position.end.column),message:u.message})}return s}))}(e),function(e){e.registerHelper("fold","rockplate",(function(t,r){var n,i,s=t.getLine(r.line),a=!!(i=(n=s)&&n.match(/^.*?\[(\-\-|if|repeat)/))&&("--"===i[1]?"comment":i[1]);if(a){var l={comment:"[--",if:"[if ",repeat:"[repeat "}[a],c=t.getValue(),u=function(e){return o.Utils.getLines(e)}(c);if(u[r.line]){var f=u.slice(0,r.line),d=s.indexOf(l)+1,p=f.join("\n").length+d+2,h=new o.Builder(c).getBlockAt(p);if(h instanceof o.CommentBlock||h instanceof o.IfBlock||h instanceof o.RepeatBlock){var m=function(e,t){return o.Utils.getPositionAt(e,t)}(c,h.offsetEnd-h.expressionEnd.length),g=m.line-1;if(!(g-r.line<1)){var y=s.indexOf(h.expression)+h.expression.length,k=m.column;return{from:e.Pos(r.line,y),to:e.Pos(g,k)}}}}}}))}(e)};window.CodeMirror&&a(window.CodeMirror)}]))},MTxn:function(e,t,r){var n={"./CodeTabs":"A5/5","./CodeTabs.tsx":"A5/5","./Highlight":"P32K","./Highlight.tsx":"P32K","./LandingDemo":"fOUm","./LandingDemo.tsx":"fOUm","./components":"B5nJ","./components.tsx":"B5nJ","./init":"65kQ","./init.ts":"65kQ","./rockplate-wrapper":"lZL1","./rockplate-wrapper.tsx":"lZL1"};function o(e){var t=i(e);if(!r.m[t]){var n=new Error("Module '"+e+"' ('"+t+"') is not available (weak dependency)");throw n.code="MODULE_NOT_FOUND",n}return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,o.id="MTxn",e.exports=o},SJVZ:function(e,t,r){!function(e){"use strict";function t(t,r,o,i){if(o&&o.call){var s=o;o=null}else s=n(t,o,"rangeFinder");"number"==typeof r&&(r=e.Pos(r,0));var a=n(t,o,"minFoldSize");function l(e){var n=s(t,r);if(!n||n.to.line-n.from.line<a)return null;for(var o=t.findMarksAt(n.from),l=0;l<o.length;++l)if(o[l].__isFold&&"fold"!==i){if(!e)return null;n.cleared=!0,o[l].clear()}return n}var c=l(!0);if(n(t,o,"scanUp"))for(;!c&&r.line>t.firstLine();)r=e.Pos(r.line-1,0),c=l(!1);if(c&&!c.cleared&&"unfold"!==i){var u=function(e,t,r){var o=n(e,t,"widget");if("function"==typeof o&&(o=o(r.from,r.to)),"string"==typeof o){var i=document.createTextNode(o);(o=document.createElement("span")).appendChild(i),o.className="CodeMirror-foldmarker"}else o&&(o=o.cloneNode(!0));return o}(t,o,c);e.on(u,"mousedown",(function(t){f.clear(),e.e_preventDefault(t)}));var f=t.markText(c.from,c.to,{replacedWith:u,clearOnEnter:n(t,o,"clearOnEnter"),__isFold:!0});f.on("clear",(function(r,n){e.signal(t,"unfold",t,r,n)})),e.signal(t,"fold",t,c.from,c.to)}}e.newFoldFunction=function(e,r){return function(n,o){t(n,o,{rangeFinder:e,widget:r})}},e.defineExtension("foldCode",(function(e,r,n){t(this,e,r,n)})),e.defineExtension("isFolded",(function(e){for(var t=this.findMarksAt(e),r=0;r<t.length;++r)if(t[r].__isFold)return!0})),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation((function(){for(var r=t.firstLine(),n=t.lastLine();r<=n;r++)t.foldCode(e.Pos(r,0),null,"fold")}))},e.commands.unfoldAll=function(t){t.operation((function(){for(var r=t.firstLine(),n=t.lastLine();r<=n;r++)t.foldCode(e.Pos(r,0),null,"unfold")}))},e.registerHelper("fold","combine",(function(){var e=Array.prototype.slice.call(arguments,0);return function(t,r){for(var n=0;n<e.length;++n){var o=e[n](t,r);if(o)return o}}})),e.registerHelper("fold","auto",(function(e,t){for(var r=e.getHelpers(t,"fold"),n=0;n<r.length;n++){var o=r[n](e,t);if(o)return o}}));var r={rangeFinder:e.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function n(e,t,n){if(t&&void 0!==t[n])return t[n];var o=e.options.foldOptions;return o&&void 0!==o[n]?o[n]:r[n]}e.defineOption("foldOptions",null),e.defineExtension("foldOption",(function(e,t){return n(this,e,t)}))}(r("VrN/"))},a2PE:function(e,t,r){"use strict";(function(e){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s,a=r("q1tI"),l="undefined"===typeof navigator||!0===e.PREVENT_CODEMIRROR_RENDER;l||(s=r("VrN/"));var c=function(){function e(){}return e.equals=function(e,t){var r=this,n=Object.keys,i=o(e),s=o(t);return e&&t&&"object"===i&&i===s?n(e).length===n(t).length&&n(e).every((function(n){return r.equals(e[n],t[n])})):e===t},e}(),u=function(){function e(e,t){this.editor=e,this.props=t}return e.prototype.delegateCursor=function(e,t,r){var n=this.editor.getDoc();r&&this.editor.focus(),t?n.setCursor(e):n.setCursor(e,null,{scroll:!1})},e.prototype.delegateScroll=function(e){this.editor.scrollTo(e.x,e.y)},e.prototype.delegateSelection=function(e,t){this.editor.getDoc().setSelections(e),t&&this.editor.focus()},e.prototype.apply=function(e){e&&e.selection&&e.selection.ranges&&this.delegateSelection(e.selection.ranges,e.selection.focus||!1),e&&e.cursor&&this.delegateCursor(e.cursor,e.autoScroll||!1,this.editor.getOption("autofocus")||!1),e&&e.scroll&&this.delegateScroll(e.scroll)},e.prototype.applyNext=function(e,t,r){e&&e.selection&&e.selection.ranges&&t&&t.selection&&t.selection.ranges&&!c.equals(e.selection.ranges,t.selection.ranges)&&this.delegateSelection(t.selection.ranges,t.selection.focus||!1),e&&e.cursor&&t&&t.cursor&&!c.equals(e.cursor,t.cursor)&&this.delegateCursor(r.cursor||t.cursor,t.autoScroll||!1,t.autoCursor||!1),e&&e.scroll&&t&&t.scroll&&!c.equals(e.scroll,t.scroll)&&this.delegateScroll(t.scroll)},e.prototype.applyUserDefined=function(e,t){t&&t.cursor&&this.delegateCursor(t.cursor,e.autoScroll||!1,this.editor.getOption("autofocus")||!1)},e.prototype.wire=function(e){var t=this;Object.keys(e||{}).filter((function(e){return/^on/.test(e)})).forEach((function(e){switch(e){case"onBlur":t.editor.on("blur",(function(e,r){t.props.onBlur(t.editor,r)}));break;case"onContextMenu":t.editor.on("contextmenu",(function(e,r){t.props.onContextMenu(t.editor,r)}));break;case"onCopy":t.editor.on("copy",(function(e,r){t.props.onCopy(t.editor,r)}));break;case"onCursor":t.editor.on("cursorActivity",(function(e){t.props.onCursor(t.editor,t.editor.getDoc().getCursor())}));break;case"onCursorActivity":t.editor.on("cursorActivity",(function(e){t.props.onCursorActivity(t.editor)}));break;case"onCut":t.editor.on("cut",(function(e,r){t.props.onCut(t.editor,r)}));break;case"onDblClick":t.editor.on("dblclick",(function(e,r){t.props.onDblClick(t.editor,r)}));break;case"onDragEnter":t.editor.on("dragenter",(function(e,r){t.props.onDragEnter(t.editor,r)}));break;case"onDragLeave":t.editor.on("dragleave",(function(e,r){t.props.onDragLeave(t.editor,r)}));break;case"onDragOver":t.editor.on("dragover",(function(e,r){t.props.onDragOver(t.editor,r)}));break;case"onDragStart":t.editor.on("dragstart",(function(e,r){t.props.onDragStart(t.editor,r)}));break;case"onDrop":t.editor.on("drop",(function(e,r){t.props.onDrop(t.editor,r)}));break;case"onFocus":t.editor.on("focus",(function(e,r){t.props.onFocus(t.editor,r)}));break;case"onGutterClick":t.editor.on("gutterClick",(function(e,r,n,o){t.props.onGutterClick(t.editor,r,n,o)}));break;case"onInputRead":t.editor.on("inputRead",(function(e,r){t.props.onInputRead(t.editor,r)}));break;case"onKeyDown":t.editor.on("keydown",(function(e,r){t.props.onKeyDown(t.editor,r)}));break;case"onKeyHandled":t.editor.on("keyHandled",(function(e,r,n){t.props.onKeyHandled(t.editor,r,n)}));break;case"onKeyPress":t.editor.on("keypress",(function(e,r){t.props.onKeyPress(t.editor,r)}));break;case"onKeyUp":t.editor.on("keyup",(function(e,r){t.props.onKeyUp(t.editor,r)}));break;case"onMouseDown":t.editor.on("mousedown",(function(e,r){t.props.onMouseDown(t.editor,r)}));break;case"onPaste":t.editor.on("paste",(function(e,r){t.props.onPaste(t.editor,r)}));break;case"onRenderLine":t.editor.on("renderLine",(function(e,r,n){t.props.onRenderLine(t.editor,r,n)}));break;case"onScroll":t.editor.on("scroll",(function(e){t.props.onScroll(t.editor,t.editor.getScrollInfo())}));break;case"onSelection":t.editor.on("beforeSelectionChange",(function(e,r){t.props.onSelection(t.editor,r)}));break;case"onTouchStart":t.editor.on("touchstart",(function(e,r){t.props.onTouchStart(t.editor,r)}));break;case"onUpdate":t.editor.on("update",(function(e){t.props.onUpdate(t.editor)}));break;case"onViewportChange":t.editor.on("viewportChange",(function(e,r,n){t.props.onViewportChange(t.editor,r,n)}))}}))},e}(),f=function(e){function t(t){var r=e.call(this,t)||this;return l?r:(r.applied=!1,r.appliedNext=!1,r.appliedUserDefined=!1,r.deferred=null,r.emulating=!1,r.hydrated=!1,r.initCb=function(){r.props.editorDidConfigure&&r.props.editorDidConfigure(r.editor)},r.mounted=!1,r)}return i(t,e),t.prototype.hydrate=function(e){var t=this,r=e&&e.options?e.options:{},o=n({},s.defaults,this.editor.options,r);Object.keys(o).some((function(e){return t.editor.getOption(e)!==o[e]}))&&Object.keys(o).forEach((function(e){r.hasOwnProperty(e)&&t.editor.getOption(e)!==o[e]&&(t.editor.setOption(e,o[e]),t.mirror.setOption(e,o[e]))})),this.hydrated||(this.deferred?this.resolveChange():this.initChange(e.value||"")),this.hydrated=!0},t.prototype.initChange=function(e){this.emulating=!0;var t=this.editor.getDoc(),r=t.lastLine(),n=t.getLine(t.lastLine()).length;t.replaceRange(e||"",{line:0,ch:0},{line:r,ch:n}),this.mirror.setValue(e),t.clearHistory(),this.mirror.clearHistory(),this.emulating=!1},t.prototype.resolveChange=function(){this.emulating=!0;var e=this.editor.getDoc();"undo"===this.deferred.origin?e.undo():"redo"===this.deferred.origin?e.redo():e.replaceRange(this.deferred.text,this.deferred.from,this.deferred.to,this.deferred.origin),this.emulating=!1,this.deferred=null},t.prototype.mirrorChange=function(e){var t=this.editor.getDoc();return"undo"===e.origin?(t.setHistory(this.mirror.getHistory()),this.mirror.undo()):"redo"===e.origin?(t.setHistory(this.mirror.getHistory()),this.mirror.redo()):this.mirror.replaceRange(e.text,e.from,e.to,e.origin),this.mirror.getValue()},t.prototype.componentDidMount=function(){var e=this;l||(this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&s.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=s(this.ref),this.shared=new u(this.editor,this.props),this.mirror=s((function(){})),this.editor.on("electricInput",(function(){e.mirror.setHistory(e.editor.getDoc().getHistory())})),this.editor.on("cursorActivity",(function(){e.mirror.setCursor(e.editor.getDoc().getCursor())})),this.editor.on("beforeChange",(function(t,r){if(!e.emulating){r.cancel(),e.deferred=r;var n=e.mirrorChange(e.deferred);e.props.onBeforeChange&&e.props.onBeforeChange(e.editor,e.deferred,n)}})),this.editor.on("change",(function(t,r){e.mounted&&e.props.onChange&&e.props.onChange(e.editor,r,e.editor.getValue())})),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getOption("autofocus")&&this.editor.focus(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},t.prototype.componentDidUpdate=function(e){if(!l){var t={cursor:null};this.props.value!==e.value&&(this.hydrated=!1),this.props.autoCursor||void 0===this.props.autoCursor||(t.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.appliedNext||(this.shared.applyNext(e,this.props,t),this.appliedNext=!0),this.shared.applyUserDefined(e,t),this.appliedUserDefined=!0}},t.prototype.componentWillUnmount=function(){l||this.props.editorWillUnmount&&this.props.editorWillUnmount(s)},t.prototype.shouldComponentUpdate=function(e,t){return!l},t.prototype.render=function(){var e=this;if(l)return null;var t=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return a.createElement("div",{className:t,ref:function(t){return e.ref=t}})},t}(a.Component);t.Controlled=f;var d=function(e){function t(t){var r=e.call(this,t)||this;return l?r:(r.applied=!1,r.appliedUserDefined=!1,r.continueChange=!1,r.detached=!1,r.hydrated=!1,r.initCb=function(){r.props.editorDidConfigure&&r.props.editorDidConfigure(r.editor)},r.mounted=!1,r.onBeforeChangeCb=function(){r.continueChange=!0},r)}return i(t,e),t.prototype.hydrate=function(e){var t=this,r=e&&e.options?e.options:{},o=n({},s.defaults,this.editor.options,r);if(Object.keys(o).some((function(e){return t.editor.getOption(e)!==o[e]}))&&Object.keys(o).forEach((function(e){r.hasOwnProperty(e)&&t.editor.getOption(e)!==o[e]&&t.editor.setOption(e,o[e])})),!this.hydrated){var i=this.editor.getDoc(),a=i.lastLine(),l=i.getLine(i.lastLine()).length;i.replaceRange(e.value||"",{line:0,ch:0},{line:a,ch:l})}this.hydrated=!0},t.prototype.componentDidMount=function(){var e=this;l||(this.detached=!0===this.props.detach,this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&s.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=s(this.ref),this.shared=new u(this.editor,this.props),this.editor.on("beforeChange",(function(t,r){e.props.onBeforeChange&&e.props.onBeforeChange(e.editor,r,e.editor.getValue(),e.onBeforeChangeCb)})),this.editor.on("change",(function(t,r){e.mounted&&e.props.onChange&&(e.props.onBeforeChange?e.continueChange&&e.props.onChange(e.editor,r,e.editor.getValue()):e.props.onChange(e.editor,r,e.editor.getValue()))})),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getDoc().clearHistory(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},t.prototype.componentDidUpdate=function(e){if(this.detached&&!1===this.props.detach&&(this.detached=!1,e.editorDidAttach&&e.editorDidAttach(this.editor)),this.detached||!0!==this.props.detach||(this.detached=!0,e.editorDidDetach&&e.editorDidDetach(this.editor)),!l&&!this.detached){var t={cursor:null};this.props.value!==e.value&&(this.hydrated=!1,this.applied=!1,this.appliedUserDefined=!1),e.autoCursor||void 0===e.autoCursor||(t.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.applied||(this.shared.apply(e),this.applied=!0),this.appliedUserDefined||(this.shared.applyUserDefined(e,t),this.appliedUserDefined=!0)}},t.prototype.componentWillUnmount=function(){l||this.props.editorWillUnmount&&this.props.editorWillUnmount(s)},t.prototype.shouldComponentUpdate=function(e,t){var r=!0;return l&&(r=!1),this.detached&&e.detach&&(r=!1),r},t.prototype.render=function(){var e=this;if(l)return null;var t=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return a.createElement("div",{className:t,ref:function(t){return e.ref=t}})},t}(a.Component);t.UnControlled=d}).call(this,r("yLpj"))},a6RD:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r("q1tI")),i=n(r("2qu3")),s=!1;function a(e,t){if(delete t.webpack,delete t.modules,!s)return e(t);var r=t.loading;return function(){return o.default.createElement(r,{error:null,isLoading:!0,pastDelay:!1,timedOut:!1})}}t.noSSR=a,t.default=function(e,t){var r=i.default,n={loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};if(e instanceof Promise?n.loader=function(){return e}:"function"===typeof e?n.loader=e:"object"===typeof e&&(n=Object.assign(Object.assign({},n),e)),n=Object.assign(Object.assign({},n),t),"object"===typeof e&&!(e instanceof Promise)&&(e.render&&(n.render=function(t,r){return e.render(r,t)}),e.modules)){r=i.default.Map;var o={},s=e.modules();Object.keys(s).forEach((function(e){var t=s[e];"function"!==typeof t.then?o[e]=t:o[e]=function(){return t.then((function(e){return e.default||e}))}})),n.loader=o}if(n.loadableGenerated&&delete(n=Object.assign(Object.assign({},n),n.loadableGenerated)).loadableGenerated,"boolean"===typeof n.ssr){if(!n.ssr)return delete n.ssr,a(r,n);delete n.ssr}return r(n)}},cWBq:function(e,t,r){var n={"./CodeTabs":["A5/5",0,6],"./CodeTabs.tsx":["A5/5",0,6],"./Highlight":["P32K",0,6,10],"./Highlight.tsx":["P32K",0,6,10],"./LandingDemo":["fOUm",0,6,9],"./LandingDemo.tsx":["fOUm",0,6,9],"./components":["B5nJ"],"./components.tsx":["B5nJ"],"./init":["65kQ"],"./init.ts":["65kQ"],"./rockplate-wrapper":["lZL1"],"./rockplate-wrapper.tsx":["lZL1"]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((function(){return r(o)}))}o.keys=function(){return Object.keys(n)},o.id="cWBq",e.exports=o},iCJ0:function(e,t,r){!function(e){"use strict";var t="CodeMirror-lint-markers";function r(e){e.parentNode&&e.parentNode.removeChild(e)}function n(t,n,o,i){var s=function(t,r,n){var o=document.createElement("div");function i(t){if(!o.parentNode)return e.off(document,"mousemove",i);o.style.top=Math.max(0,t.clientY-o.offsetHeight-5)+"px",o.style.left=t.clientX+5+"px"}return o.className="CodeMirror-lint-tooltip cm-s-"+t.options.theme,o.appendChild(n.cloneNode(!0)),t.state.lint.options.selfContain?t.getWrapperElement().appendChild(o):document.body.appendChild(o),e.on(document,"mousemove",i),i(r),null!=o.style.opacity&&(o.style.opacity=1),o}(t,n,o);function a(){var t;e.off(i,"mouseout",a),s&&((t=s).parentNode&&(null==t.style.opacity&&r(t),t.style.opacity=0,setTimeout((function(){r(t)}),600)),s=null)}var l=setInterval((function(){if(s)for(var e=i;;e=e.parentNode){if(e&&11==e.nodeType&&(e=e.host),e==document.body)return;if(!e){a();break}}if(!s)return clearInterval(l)}),400);e.on(i,"mouseout",a)}function o(e,t,r){this.marked=[],this.options=t,this.timeout=null,this.hasGutter=r,this.onMouseOver=function(t){!function(e,t){var r=t.target||t.srcElement;if(/\bCodeMirror-lint-mark-/.test(r.className)){for(var o=r.getBoundingClientRect(),i=(o.left+o.right)/2,s=(o.top+o.bottom)/2,l=e.findMarksAt(e.coordsChar({left:i,top:s},"client")),c=[],u=0;u<l.length;++u){var f=l[u].__annotation;f&&c.push(f)}c.length&&function(e,t,r){for(var o=r.target||r.srcElement,i=document.createDocumentFragment(),s=0;s<t.length;s++){var l=t[s];i.appendChild(a(l))}n(e,r,i,o)}(e,c,t)}}(e,t)},this.waitingFor=0}function i(e){var r=e.state.lint;r.hasGutter&&e.clearGutter(t);for(var n=0;n<r.marked.length;++n)r.marked[n].clear();r.marked.length=0}function s(t,r,o,i,s){var a=document.createElement("div"),l=a;return a.className="CodeMirror-lint-marker-"+o,i&&((l=a.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker-multiple"),0!=s&&e.on(l,"mouseover",(function(e){n(t,e,r,l)})),a}function a(e){var t=e.severity;t||(t="error");var r=document.createElement("div");return r.className="CodeMirror-lint-message-"+t,"undefined"!=typeof e.messageHTML?r.innerHTML=e.messageHTML:r.appendChild(document.createTextNode(e.message)),r}function l(t){var r=t.state.lint.options,n=r.options||r,o=r.getAnnotations||t.getHelper(e.Pos(0,0),"lint");if(o)if(r.async||o.async)!function(t,r,n){var o=t.state.lint,i=++o.waitingFor;function s(){i=-1,t.off("change",s)}t.on("change",s),r(t.getValue(),(function(r,n){t.off("change",s),o.waitingFor==i&&(n&&r instanceof e&&(r=n),t.operation((function(){c(t,r)})))}),n,t)}(t,o,n);else{var i=o(t.getValue(),n,t);if(!i)return;i.then?i.then((function(e){t.operation((function(){c(t,e)}))})):t.operation((function(){c(t,i)}))}}function c(e,r){i(e);for(var n,o,l=e.state.lint,c=l.options,u=function(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],o=n.from.line;(t[o]||(t[o]=[])).push(n)}return t}(r),f=0;f<u.length;++f){var d=u[f];if(d){for(var p=null,h=l.hasGutter&&document.createDocumentFragment(),m=0;m<d.length;++m){var g=d[m],y=g.severity;y||(y="error"),o=y,p="error"==(n=p)?n:o,c.formatAnnotation&&(g=c.formatAnnotation(g)),l.hasGutter&&h.appendChild(a(g)),g.to&&l.marked.push(e.markText(g.from,g.to,{className:"CodeMirror-lint-mark-"+y,__annotation:g}))}l.hasGutter&&e.setGutterMarker(f,t,s(e,h,p,d.length>1,l.options.tooltips))}}c.onUpdateLinting&&c.onUpdateLinting(r,u,e)}function u(e){var t=e.state.lint;t&&(clearTimeout(t.timeout),t.timeout=setTimeout((function(){l(e)}),t.options.delay||500))}e.defineOption("lint",!1,(function(r,n,s){if(s&&s!=e.Init&&(i(r),!1!==r.state.lint.options.lintOnChange&&r.off("change",u),e.off(r.getWrapperElement(),"mouseover",r.state.lint.onMouseOver),clearTimeout(r.state.lint.timeout),delete r.state.lint),n){for(var a=r.getOption("gutters"),c=!1,f=0;f<a.length;++f)a[f]==t&&(c=!0);var d=r.state.lint=new o(r,(p=n)instanceof Function?{getAnnotations:p}:(p&&!0!==p||(p={}),p),c);!1!==d.options.lintOnChange&&r.on("change",u),0!=d.options.tooltips&&"gutter"!=d.options.tooltips&&e.on(r.getWrapperElement(),"mouseover",d.onMouseOver),l(r)}var p})),e.defineExtension("performLint",(function(){this.state.lint&&l(this)}))}(r("VrN/"))},jXCp:function(e,t,r){!function(e){"use strict";function t(t,r){var n=t.getLine(r),o=n.search(/\S/);return-1==o||/\bcomment\b/.test(t.getTokenTypeAt(e.Pos(r,o+1)))?-1:e.countColumn(n,null,t.getOption("tabSize"))}e.registerHelper("fold","indent",(function(r,n){var o=t(r,n.line);if(!(o<0)){for(var i=null,s=n.line+1,a=r.lastLine();s<=a;++s){var l=t(r,s);if(-1==l);else{if(!(l>o))break;i=s}}return i?{from:e.Pos(n.line,r.getLine(n.line).length),to:e.Pos(i,r.getLine(i).length)}:void 0}}))}(r("VrN/"))},jwwS:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r("q1tI"));t.LoadableContext=o.createContext(null)},lZL1:function(e,t,r){"use strict";r.r(t),r.d(t,"getComponentWrapped",(function(){return a})),r.d(t,"getComponent",(function(){return l}));var n=r("a6RD"),o=r.n(n),i=r("65kQ"),s=!1;s||("undefined"!==typeof navigator&&Object(i.default)(),s=!0);var a=function(e){return o()((function(){return Promise.resolve(e)}),{ssr:!1})},l=function(e){return o()((function(){return r("cWBq")("./"+e)}),{ssr:!1,loadableGenerated:{webpack:function(){return[r("MTxn").resolve("./"+e)]},modules:["./"+e]}})}},nrkQ:function(e,t,r){!function(e){"use strict";e.overlayMode=function(t,r,n){return{startState:function(){return{base:e.startState(t),overlay:e.startState(r),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(n){return{base:e.copyState(t,n.base),overlay:e.copyState(r,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(e,o){return(e!=o.streamSeen||Math.min(o.basePos,o.overlayPos)<e.start)&&(o.streamSeen=e,o.basePos=o.overlayPos=e.start),e.start==o.basePos&&(o.baseCur=t.token(e,o.base),o.basePos=e.pos),e.start==o.overlayPos&&(e.pos=e.start,o.overlayCur=r.token(e,o.overlay),o.overlayPos=e.pos),e.pos=Math.min(o.basePos,o.overlayPos),null==o.overlayCur?o.baseCur:null!=o.baseCur&&o.overlay.combineTokens||n&&null==o.overlay.combineTokens?o.baseCur+" "+o.overlayCur:o.overlayCur},indent:t.indent&&function(e,r,n){return t.indent(e.base,r,n)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var o,i;return t.blankLine&&(o=t.blankLine(e.base)),r.blankLine&&(i=r.blankLine(e.overlay)),null==i?o:n&&null!=o?o+" "+i:i}}}}(r("VrN/"))},rt3J:function(e,t,r){!function(e){"use strict";e.registerHelper("fold","brace",(function(t,r){var n,o=r.line,i=t.getLine(o);function s(s){for(var a=r.ch,l=0;;){var c=a<=0?-1:i.lastIndexOf(s,a-1);if(-1!=c){if(1==l&&c<r.ch)break;if(n=t.getTokenTypeAt(e.Pos(o,c+1)),!/^(comment|string)/.test(n))return c+1;a=c-1}else{if(1==l)break;l=1,a=i.length}}}var a="{",l="}",c=s("{");if(null==c&&(a="[",l="]",c=s("[")),null!=c){var u,f,d=1,p=t.lastLine();e:for(var h=o;h<=p;++h)for(var m=t.getLine(h),g=h==o?c:0;;){var y=m.indexOf(a,g),k=m.indexOf(l,g);if(y<0&&(y=m.length),k<0&&(k=m.length),(g=Math.min(y,k))==m.length)break;if(t.getTokenTypeAt(e.Pos(h,g+1))==n)if(g==y)++d;else if(!--d){u=h,f=g;break e}++g}if(null!=u&&o!=u)return{from:e.Pos(o,c),to:e.Pos(u,f)}}})),e.registerHelper("fold","import",(function(t,r){function n(r){if(r<t.firstLine()||r>t.lastLine())return null;var n=t.getTokenAt(e.Pos(r,1));if(/\S/.test(n.string)||(n=t.getTokenAt(e.Pos(r,n.end+1))),"keyword"!=n.type||"import"!=n.string)return null;for(var o=r,i=Math.min(t.lastLine(),r+10);o<=i;++o){var s=t.getLine(o).indexOf(";");if(-1!=s)return{startCh:n.end,end:e.Pos(o,s)}}}var o,i=r.line,s=n(i);if(!s||n(i-1)||(o=n(i-2))&&o.end.line==i-1)return null;for(var a=s.end;;){var l=n(a.line+1);if(null==l)break;a=l.end}return{from:t.clipPos(e.Pos(i,s.startCh+1)),to:a}})),e.registerHelper("fold","include",(function(t,r){function n(r){if(r<t.firstLine()||r>t.lastLine())return null;var n=t.getTokenAt(e.Pos(r,1));return/\S/.test(n.string)||(n=t.getTokenAt(e.Pos(r,n.end+1))),"meta"==n.type&&"#include"==n.string.slice(0,8)?n.start+8:void 0}var o=r.line,i=n(o);if(null==i||null!=n(o-1))return null;for(var s=o;null!=n(s+1);)++s;return{from:e.Pos(o,i+1),to:t.clipPos(e.Pos(s))}}))}(r("VrN/"))},y8iW:function(e,t,r){!function(e){"use strict";e.defineOption("foldGutter",!1,(function(t,n,o){var i;o&&o!=e.Init&&(t.clearGutter(t.state.foldGutter.options.gutter),t.state.foldGutter=null,t.off("gutterClick",l),t.off("changes",c),t.off("viewportChange",u),t.off("fold",f),t.off("unfold",f),t.off("swapDoc",c)),n&&(t.state.foldGutter=new r((!0===(i=n)&&(i={}),null==i.gutter&&(i.gutter="CodeMirror-foldgutter"),null==i.indicatorOpen&&(i.indicatorOpen="CodeMirror-foldgutter-open"),null==i.indicatorFolded&&(i.indicatorFolded="CodeMirror-foldgutter-folded"),i)),a(t),t.on("gutterClick",l),t.on("changes",c),t.on("viewportChange",u),t.on("fold",f),t.on("unfold",f),t.on("swapDoc",c))}));var t=e.Pos;function r(e){this.options=e,this.from=this.to=0}function n(e,r){for(var n=e.findMarks(t(r,0),t(r+1,0)),o=0;o<n.length;++o)if(n[o].__isFold){var i=n[o].find(-1);if(i&&i.line===r)return n[o]}}function o(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function i(e,r,i){var a=e.state.foldGutter.options,l=r-1,c=e.foldOption(a,"minFoldSize"),u=e.foldOption(a,"rangeFinder"),f="string"==typeof a.indicatorFolded&&s(a.indicatorFolded),d="string"==typeof a.indicatorOpen&&s(a.indicatorOpen);e.eachLine(r,i,(function(r){++l;var i=null,s=r.gutterMarkers;if(s&&(s=s[a.gutter]),n(e,l)){if(f&&s&&f.test(s.className))return;i=o(a.indicatorFolded)}else{var p=t(l,0),h=u&&u(e,p);if(h&&h.to.line-h.from.line>=c){if(d&&s&&d.test(s.className))return;i=o(a.indicatorOpen)}}(i||s)&&e.setGutterMarker(r,a.gutter,i)}))}function s(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function a(e){var t=e.getViewport(),r=e.state.foldGutter;r&&(e.operation((function(){i(e,t.from,t.to)})),r.from=t.from,r.to=t.to)}function l(e,r,o){var i=e.state.foldGutter;if(i){var s=i.options;if(o==s.gutter){var a=n(e,r);a?a.clear():e.foldCode(t(r,0),s)}}}function c(e){var t=e.state.foldGutter;if(t){var r=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout((function(){a(e)}),r.foldOnChangeTimeSpan||600)}}function u(e){var t=e.state.foldGutter;if(t){var r=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout((function(){var r=e.getViewport();t.from==t.to||r.from-t.to>20||t.from-r.to>20?a(e):e.operation((function(){r.from<t.from&&(i(e,r.from,t.from),t.from=r.from),r.to>t.to&&(i(e,t.to,r.to),t.to=r.to)}))}),r.updateViewportTimeSpan||400)}}function f(e,t){var r=e.state.foldGutter;if(r){var n=t.line;n>=r.from&&n<r.to&&i(e,n,n+1)}}}(r("VrN/"),r("SJVZ"))},yLpj:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},z06z:function(e,t,r){"use strict";r.r(t),r.d(t,"Builder",(function(){return u})),r.d(t,"Parser",(function(){return f})),r.d(t,"Rockplate",(function(){return d})),r.d(t,"Linter",(function(){return p})),r.d(t,"Utils",(function(){return c})),r.d(t,"Block",(function(){return n})),r.d(t,"IfBlock",(function(){return o})),r.d(t,"RepeatBlock",(function(){return i})),r.d(t,"LiteralBlock",(function(){return s})),r.d(t,"CommentBlock",(function(){return a})),r.d(t,"createBlock",(function(){return l}));class n{constructor(){this.offsetBegin=0,this.offsetEnd=0,this.expression="",this.expressionEnd="",this.type="literal",this.content="",this.outerContent="",this.children=[],this.key="",this.thisIsClass=!0}}class o extends n{constructor(){super(...arguments),this.type="if",this.subkey="",this.operator="",this.elseChildren=[]}}class i extends n{constructor(){super(...arguments),this.type="repeat"}}class s extends n{constructor(){super(...arguments),this.type="literal",this.identifiers=[],this.booleans=[],this.arrays=[]}}class a extends n{constructor(){super(...arguments),this.type="comment"}}const l=(e,t={})=>{let r;r="comment"===e?new a:"if"===e?new o:"repeat"===e?new i:new s;for(const n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r};class c{static getParamsMerged(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);for(const n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}static getParamsMergedForBlock(e,t,r){return t&&(r||e.key&&t[e.key]&&t[e.key][0])?(r||(r=t[e.key][0]),c.getParamsMerged(t,r)):t}static getLines(e){return e.split("\r\n").join("\r").split("\n").join("\r").split("\r")}static getPositionAt(e,t){const r=c.getLines(e.substr(0,t+1));return{line:r.length,column:r[r.length-1].length-1}}}class u{constructor(e,t,r){this.code=e,this.schemaResolver=t,this.strictOverride=r,this.template=e}get strict(){if(void 0!==this.strictOverride)return this.strictOverride;this.blocks;return!!this.schema}get type(){return this.strict?"strict":"dynamic"}get blocks(){return this.builtBlocks||(this.builtBlocks=[],this.build()),this.builtBlocks}build(){const e=this.getSchemaFromString(this.code);let t=0;if(e){t=e.offset,this.template=this.code.substr(t);const r=e.schema;let n;const o=Object.keys(r);if(1===o.length&&"schema"===o[0]&&(n=r.schema),n&&this.schemaResolver instanceof Function){const e=this.schemaResolver(n);if(e&&e.then)return new Promise((r,n)=>{e.then(e=>{this.schema=e;const n=this.findOuterBlocks(this.template,this.schema);this.repairOffsets(n,t),this.builtBlocks=n,r(n)})});this.schema=e||void 0}else this.schema=r}else this.schema=this.schemaResolver;const r=this.findOuterBlocks(this.template,this.schema);return this.repairOffsets(r,t),this.builtBlocks=r,Promise.resolve(r)}getParamsMergedForBlock(e,t,r){return c.getParamsMergedForBlock(e,t,r)}getSchemaFromString(e){const t=e.indexOf("{");if(-1===t)return!1;let r=t;for(let o=0;o<1e4;o++){const o=e.substr(r+1).indexOf("}");if(-1===o)return!1;let i;r+=o+1;try{return i=JSON.parse(e.substring(t,r+1)),{schema:i,startIndex:t,endIndex:r,offset:r+1}}catch(n){}}}findOuterBlocks(e,t){const r=this.findOuterBlocksRecursively(e,t);for(const n of r)if("repeat"===n.type){const e=this.getParamsMergedForBlock(n,t);n.children=this.findOuterBlocks(n.content,e)}else if(n instanceof o){const e=this.findOuterBlocks(n.content,t);let r,o=[],i=[];for(const t of e.concat([]).reverse()){if("literal"===t.type){if(-1!==t.content.indexOf("[else]")){r=t;continue}}(r?o:i).push(t)}if(o.reverse(),i.reverse(),r){const e=r.content.split("[else]");i.unshift(this.getLiteralBlock(e.pop(),t)),o.push(this.getLiteralBlock(e.join("[else]"),t))}else o=i,i=[];n.children=o,n.elseChildren=i}return r}findOuterBlocksRecursively(e,t){const r=[];let n=this.findFirstBlock(e,t);r.push(this.getLiteralBlock(e,t,void 0,n));for(let o=0;o<1e4&&n;o++){r.push(n);const o=n;n=this.findNextBlock(e,t,n),r.push(this.getLiteralBlock(e,t,o,n))}return r}getBlockPrefix(e){return{comment:"[--",if:"[if ",repeat:"[repeat ",literal:""}[e]}getDynamicBlockDefinition(e,t,r){if("if"!==t&&"repeat"!==t)return;const n=e+this.getBlockPrefix(t).length,o=r.substr(n),i=o.indexOf("]");if(-1===i)return;const s=o.substring(0,i);if("if"!==t)return{blockType:t,key:s};{const e=["are not","are","is not","is"];for(const r of e){const e=" "+r+" ",n=s.indexOf(e);if(-1!==n)return{blockType:t,key:s.substring(0,n),operator:r,subkey:s.substr(n+e.length)}}}}getStrictBlockDefinition(e,t,r,n){if("if"!==t&&"repeat"!==t)return;const o=this.getBlockPrefix(t);for(const i in n)if(n.hasOwnProperty(i)){if("repeat"===t&&Array.isArray(n[i])){const n=o+""+i+"]";if(r.substr(e,n.length)===n)return{blockType:t,key:i}}if("if"===t&&!Array.isArray(n[i]))for(const s in n[i]){if(!n[i].hasOwnProperty(s))continue;const a=["are not","are","is not","is"];for(const n of a){const a=o+""+i+" "+n+" "+s+"]";if(r.substr(e,a.length)===a)return{blockType:t,key:i,operator:n,subkey:s}}}}}getValidBlockDefinition(e,t,r,n){return"comment"===t?{blockType:t}:this.strict?this.getStrictBlockDefinition(e,t,r,n):this.getDynamicBlockDefinition(e,t,r)}findFirstBlock(e,t){let r=Number.MAX_SAFE_INTEGER;const n={};for(const i of["comment","if","repeat"]){const o=e.indexOf(this.getBlockPrefix(i));if(-1===o)continue;const s=this.getValidBlockDefinition(o,i,e,t);s&&o<r&&(r=o,n[o]=s)}const o=n[r];if(o)return"if"===o.blockType?this.getIfBlock(e,t,o.operator,o.key,o.subkey,r):"repeat"===o.blockType?this.getRepeatBlock(e,t,o.key,r):this.getCommentBlock(e,r)}findNextBlock(e,t,r){e=e.substr(r.offsetEnd);const n=this.findFirstBlock(e,t);return n&&(n.offsetBegin+=r.offsetEnd,n.offsetEnd+=r.offsetEnd),n}isValidIdentifier(e,t){return-1!==e.map(e=>e.key+" "+e.subkey).indexOf(t)}getIdentifiers(e){return this.getVariables(e).filter(e=>"array"!==e.type).map(e=>({key:e.key,subkey:e.subkey}))}getVariables(e){const t=[];for(const r in e)if(e.hasOwnProperty(r))if(Array.isArray(e[r]))t.push({key:r,subkey:"",type:"array"});else if("object"===typeof e[r])for(const n in e[r])e[r].hasOwnProperty(n)&&("boolean"===typeof e[r][n]?t.push({key:r,subkey:n,type:"boolean"}):t.push({key:r,subkey:n,type:"identifier"}));return t}getLiteralBlock(e,t,r,n){const o=l("literal",{offsetBegin:r?r.offsetEnd:0,offsetEnd:n?n.offsetBegin:e.length});if(o.content=e.substring(o.offsetBegin,o.offsetEnd),o.outerContent=o.content,this.strict){o.identifiers=[],o.booleans=[],o.arrays=[];for(const e of this.getVariables(t))"array"!==e.type?("boolean"===e.type&&o.booleans.push({key:e.key,subkey:e.subkey}),o.identifiers.push({key:e.key,subkey:e.subkey})):o.arrays.push(e.key)}return o.scope=t,o}getBlock(e,t,r,n,o,i,s,a,c){let u=-1;const f=this.getBlockPrefix(n);let d=r+o.length,p=e.substr(d);if("comment"===n)u=p.indexOf(i),-1!==u&&(u=d+u);else{const t=1e4;let r,n,o=0;for(let e=0;e<t&&(r=p.indexOf(f),n=p.indexOf(i),-1===n||!(-1===r||n<r));e++)-1!==r&&r<n&&(o++,p=p.substr(r+f.length));p=e.substr(d);const s=[];for(let e=0;e<=o;e++)n=p.indexOf(i),-1!==n?(p=p.substr(n+i.length),s.push(d+n),d=d+n+i.length):s.push(-1);void 0!==s[o]&&-1!==s[o]&&(u=s[o])}if(-1===u)return;const h=l(n,{offsetBegin:r,offsetEnd:u+i.length,expression:o,expressionEnd:i,key:s,subkey:a,operator:c});return h.content=e.substring(r+o.length,u),h.outerContent=e.substring(h.offsetBegin,h.offsetEnd),h.scope=t,h}getCommentBlock(e,t){return this.getBlock(e,null,t,"comment","[--","--]")}getRepeatBlock(e,t,r,n){return this.getBlock(e,t,n,"repeat","[repeat "+r+"]","[end repeat]",r)}getIfBlock(e,t,r,n,o,i){return this.getBlock(e,t,i,"if","[if "+n+" "+r+" "+o+"]","[end if]",n,o,r)}advanceOffset(e,t){return t+e.outerContent.length}repairOffsets(e,t){for(const r of e)r.offsetBegin=t,r instanceof o?(t+=r.expression.length,t=this.repairOffsets(r.children,t),r.elseChildren.length&&(t+="[else]".length,t=this.repairOffsets(r.elseChildren,t)),t+=r.expressionEnd.length):r instanceof i?(t+=r.expression.length,t=this.repairOffsets(r.children,t),t+=r.expressionEnd.length):t=this.advanceOffset(r,t),r.offsetEnd=t;return t}getBlockAtIndex(e,t){let r;for(const n of e)if(t>=n.offsetBegin&&t<=n.offsetEnd){if(n instanceof o)r=this.getBlockAtIndex(n.children.concat(n.elseChildren),t);else{if(!(n instanceof i))return n;r=this.getBlockAtIndex(n.children,t)}r||(r=n)}return r}getBlockAt(e){return this.getBlockAtIndex(this.blocks,e)}}class f{constructor(e){this.builder=e}parse(e){return this.getBlocksParsed(this.builder.blocks,e)}getParamsMergedForBlock(e,t,r){return c.getParamsMergedForBlock(e,t,r)}getBlocksParsed(e,t){let r="";for(const n of e)r+=this.getBlockParsed(n,t);return r}processBlock(e,t){if(e instanceof a)return"";let r=e.content;if(-1===r.indexOf("[")||-1===r.indexOf("]"))return r;for(const n in t)if(t.hasOwnProperty(n)&&-1!==r.indexOf("["+n+" "))for(const o in t[n]){if(!t[n].hasOwnProperty(o))continue;const i=n+" "+o,s="["+i+"]";-1!==r.indexOf(s)&&(this.builder.strict&&!this.builder.isValidIdentifier(e.identifiers,i)||(r=r.split(s).join(t[n][o])))}return r}getBlockParsed(e,t){if(e instanceof o){let r=!1;if(!t[e.key]||"boolean"!==typeof t[e.key][e.subkey])return e.outerContent;return r=t[e.key][e.subkey]===("is not"!==e.operator&&"are not"!==e.operator),r?this.getBlocksParsed(e.children,t):e.elseChildren.length?this.getBlocksParsed(e.elseChildren,t):""}if("repeat"===e.type){if(!Array.isArray(t[e.key]))return e.outerContent;let r="";for(const n of t[e.key]){const o=this.getParamsMergedForBlock(e,t,n);r+=this.getBlocksParsed(e.children,o)}return r}return this.processBlock(e,t)}}class d{constructor(e,t,r){this.builder=new u(e,t,r),this.parser=new f(this.builder)}build(){return this.builder.build()}parse(e){return this.parser.parse(e)}validateTemplate(){return this.build(),this.builder.template===this.getTemplateFromBlocks(this.builder.blocks)}getTemplateFromBlocks(e){let t="";for(const r of e)r.children.length?(t+=r.expression,t+=this.getTemplateFromBlocks(r.children),r instanceof o&&r.elseChildren.length&&(t+="[else]",t+=this.getTemplateFromBlocks(r.elseChildren)),t+=r.expressionEnd):t+=r.outerContent;return t}}class p{constructor(e,t,r){this.strictOverride=r,this.builder=new u(e,t,!1)}build(){return this.builder.build()}get strict(){return void 0!==this.strictOverride?this.strictOverride:!!this.builder.schema}getBlockPrefix(e){return{comment:"[--",if:"[if ",repeat:"[repeat ",literal:""}[e]}getParamsMergedForBlock(e,t,r){return c.getParamsMergedForBlock(e,t,r)}createLintResult(e){return{offset:{begin:e.offsetBegin,end:e.offsetEnd},position:{begin:{line:1,column:0},end:{line:1,column:0}},severity:e.severity,expression:e.expression,message:e.message,blockType:e.block.type,block:e.block,scope:e.block.scope}}scanLiteralBlock(e,t,r){const n=[];let o,i,s,a=e.outerContent,l=0+e.offsetBegin;const c=(t,r=!1)=>this.createLintResult({severity:r?"warning":"error",block:e,offsetBegin:o,offsetEnd:i,expression:s,message:t});for(let u=0;u<1e4;u++){const e=a.indexOf("["),u=a.indexOf("]");if(-1===e)break;let f=!1;if(-1===u)return s=a.substr(e,10)+"...",o=l+e+1,i=l+a.length,n.push(c('Invalid: Expression "'+s+'"')),n;const d=a.substring(e+1,u);s="["+d+"]",o=l+e+1,f=!0,l=l+u+1,a=a.substr(u+1);let p="",h="";for(const t in r)if(0===d.indexOf(t+" ")){p=t;for(const e in r[t])if(0===(d+"]").substr(t.length).indexOf(" "+e+"]")){h=e;break}break}i=o+d.length;const m=!(!this.strict||!t)&&this.builder.getIdentifiers(t),g=m&&this.builder.isValidIdentifier(m,d);if(p&&h){m&&!g&&n.push(c('(STRICT) Illegal: Identifier "'+d+'"',!0));continue}if(m&&g){n.push(c('(STRICT) Unavailable: Identifier "'+d+'"',!0));continue}o+=p?(p+" ").length:0,i=o+d.length-(p?(p+" ").length:0);const y=p?'Unavailable: Property "'+d.replace(p+" ","")+'" on Object "'+p+'"':'Unavailable: Identifier "'+d+'"';n.push(c(y))}return n}scanBlocks(e,t,r,n){let a,l;for(const c of e){const e=(e,t=!1)=>this.createLintResult({severity:t?"warning":"error",block:c,offsetBegin:a,offsetEnd:l,expression:c.expression,message:e});if(c instanceof o){if(r[c.key]&&"boolean"===typeof r[c.key][c.subkey])!this.strict||t[c.key]&&"boolean"===typeof t[c.key][c.subkey]||(a=c.offsetBegin+this.getBlockPrefix("if").length,l=c.offsetBegin+c.expression.length-1,n.push(e('(STRICT) Illegal: Condition "'+c.key+" "+c.operator+" "+c.subkey+'"',!0)));else if(this.strict&&t[c.key]&&"boolean"===typeof t[c.key][c.subkey]){const t=r[c.key]&&"object"===typeof r[c.key];a=c.offsetBegin+this.getBlockPrefix("if").length+(t?(c.key+" "+c.operator+" ").length:0),l=c.offsetBegin+c.expression.length-1,n.push(e("(STRICT) Unavailable: "+(t?"":'Object "'+c.key+'" and ')+'Boolean "'+c.subkey+'"',!0))}else{const t=r[c.key]&&"object"===typeof r[c.key];a=c.offsetBegin+this.getBlockPrefix("if").length+(t?(c.key+" "+c.operator+" ").length:0),l=c.offsetBegin+c.expression.length-1,n.push(e("Unavailable: "+(t?"":'Object "'+c.key+'" and ')+'Boolean "'+c.subkey+'"'))}this.scanBlocks(c.children,t,r,n),c.elseChildren.length&&this.scanBlocks(c.elseChildren,t,r,n)}else if(c instanceof i){a=c.offsetBegin+this.getBlockPrefix("repeat").length,l=c.offsetBegin+c.expression.length-1,Array.isArray(r[c.key])?this.strict&&!Array.isArray(t[c.key])&&n.push(e('(STRICT) Illegal: Array "'+c.key+'"',!0)):this.strict&&Array.isArray(t[c.key])?n.push(e('(STRICT) Unavailable: Array "'+c.key+'"',!0)):n.push(e('Unavailable: Array "'+c.key+'"'));const o=this.getParamsMergedForBlock(c,t),i=this.getParamsMergedForBlock(c,r);this.scanBlocks(c.children,o,i,n)}else c instanceof s&&n.push(...this.scanLiteralBlock(c,t,r))}}resolveLineAndColumn(e){const t=c.getPositionAt(this.builder.code,e.offset.begin);return e.position.begin.line=t.line,e.position.begin.column=t.column,e.position.end.line=t.line,e.position.end.column=t.column+(e.offset.end-e.offset.begin),e}lint(e,t=!0){this.build();const r=[],n=this.builder.schema||{};void 0===e&&(e=n),this.scanBlocks(this.builder.blocks,n,e,r);let o=!1,i=!1;return r.map(e=>{"error"===e.severity&&(o=!0),"warning"===e.severity&&(i=!0),t&&this.resolveLineAndColumn(e)}),{lints:r,hasErrors:o,hasWarnings:i}}}}}]);